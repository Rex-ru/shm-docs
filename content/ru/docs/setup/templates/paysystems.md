---
title: "Платежные системы"
weight: 10
toc_hide: true
hide_summary: true
---

## Описание

SHM имеет встроенный модуль `paysystems`, позволяющий получать список доступных платежных систем.


#### Получить список платежных систем можно:
- Через Web: `/shm/v1/user/pay/paysystems`
- Из шаблонов: `pay.paysystems( АРГУМЕНТЫ )`

###  Аргументы

| Параметр | Описание |
|:---------|----------|
| user_id  | Идентификатор пользователя
| amount   | Сумма платежа. По-умолчанию в неё записывается значение `total` из "Прогноз оплаты"
| pp       | Proposed Payment (Предлагаемый платеж). Установите этот параметр в 1, если хотите, чтобы сумма платежа (`amount`) была установлена в ссылку `shm_url`
| paysystem | Укажите платежную систему, если хотите получить ссылку только для одной конкретной платежной системы


### Описание полей

#### Пример ответа:
```go
{
    "TZ": "Europe/Moscow",
        "data": [
        {
            "amount": 123,
            "forecast": 0,
            "name": "yookassa",
            "paysystem": "yookassa",
            "shm_url": "/shm/pay_systems/yookassa.cgi?action=create&user_id=1&ts=1706539331&amount=",
            "user_id": 1,
            "weight": 10
        },
        {
            "amount": 123,
            "forecast": 0,
            "name": "ЮMoney",
            "paysystem": "yoomoney",
            "shm_url": "/shm/pay_systems/yoomoney.cgi?action=create&user_id=1&ts=1706539331&amount=",
            "user_id": 1,
            "weight": 0
        }
        ],
        "date": "Mon Jan 29 17:42:11 2024",
        "items": 0,
        "limit": 25,
        "offset": 0,
        "version": "0.10.0"
}
```

Где:
- `paysystem` - Платежная система
- `name` - Произвольное название платежной системы (для отображения)
- `amount` - Сумма платежа. По-умолчанию заполняется из "Прогноз оплаты", если он положительный, или из переданного аргумента `amount`. В остальных случаях - пустой.
- `forecast` - "Прогноз оплаты"
- `weight` - "вес". Используется для сортировки платежных систем
- `shm_url` - Ссылка для выставления счета в платежной системе. Если флаг `pp` не установлен, то `amount` в ссылке остается пустой. Это сделано для удобства использования ссылки.


