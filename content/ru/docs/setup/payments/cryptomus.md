
---
title: Cryptomus
weight: 1
---

Сервис позволяет принимать крипто-валюту от ваших клиентов.

> SHM не умеет конвертировать валюты, поэтому в биллинге следует установить все цены для услуг в той же валюте что указано в `currency`.

## Настройка платежной системы Cryptomus

* Зарегистрируйтесь в сервисе Cryptomus (https://cryptomus.com/ru)
* Сохраните в [конфиг]({{< ref "/docs/api/config" >}}) SHM следующие данные:
```yaml
{
  "pay_systems": {
    "cryptomus": {
      "name": "CryptoCloud"
      "api_key": "Платежный_api_ключ_из_настроек_мерчанта"
      "merchant": "ID_мерсанта_из_настроек_мерчанта"
      "currency": "RUB_или_USD"
      "url_success": "укажите_url_бота_для_возврата_после_удачного_платежа"
      "url_callback": "https://ВАШ_ДОМЕН/shm/pay_systems/cryptomus.cgi"
      "show_for_client": true
    }
  }
}
```
#### Дополнительные параметры:

`lifetime` в секундах, по умолчанию (3600) 1 час 
* min: 300
* max: 43200

`to_currency` всегда должен быть кодом криптовалюты, а не кодом фиатной валюты.

Параметр используется для указания целевой валюты для пересчета суммы счета.
При создании счета-фактуры вы указываете сумму и валюту, и API преобразует эту сумму в эквивалентное значение в `to_currency`
Например, чтобы создать счет на 20 USD в BTC:
* `amount: 20`
* `currency: "USD"`
* `to_currency: "BTC"`

API конвертирует сумму в размере 20 USD в ее эквивалент в BTC на основе текущего обменного курса, и пользователь будет платить в BTC.

`course_source` Сервис, из которого берутся обменные курсы для пересчета в счете-фактуре.

* min: 4
* max: 20

##### Доступные значения:
* Binance
* BinanceP2P
* Exmo
* Kucoin
* Garantexio

`Если не задано, используются обменные курсы Cryptomus.`


#### Настройте URL для уведомлений:

в параметр `url_callback` добавьте ссылку

* https://ВАШ_ДОМЕН/shm/pay_systems/cryptomus.cgi"

### Пример ссылки для создания платежа:

`https://ВАШ_ДОМЕН/shm/pay_systems/cryptomus.cgi?action=create&amount=123&user_id=123`

